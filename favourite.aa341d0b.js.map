{"mappings":"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","sources":["src/js/favorite-page.js"],"sourcesContent":["// -- underline current menu item in header -- //\nimport './header';\nimport { textHiding } from './news-text-hiding';\nimport { pageNothingFound } from './markup';\n\nconst home = document.querySelector('#home');\nconst favourite = document.querySelector('#favourite');\nconst read = document.querySelector('#read');\nif (window.location.pathname.indexOf('/favourite.html') >= 0) {\n  home.classList.remove('current');\n  read.classList.remove('current');\n  favourite.classList.add('current');\n} else if (window.location.pathname.indexOf('/read.html') >= 0) {\n  home.classList.remove('current');\n  favourite.classList.remove('current');\n  read.classList.add('current');\n} else {\n  favourite.classList.remove('current');\n  read.classList.remove('current');\n  home.classList.add('current');\n}\n\nconst checkbox = document.querySelector('.checkbox');\nconst mobileCheckbox = document.querySelector('.mobile-checkbox');\ncheckbox.addEventListener('change', darkMode);\nmobileCheckbox.addEventListener('change', darkMode);\nfunction darkMode() {\n  if (this.checked) {\n    body.classList.add('dark');\n    localStorage.setItem('dark-theme', 'dark');\n  } else {\n    body.classList.remove('dark');\n    localStorage.setItem('dark-theme', 'light');\n  }\n}\n\n// падінг для main\nconst main = document.querySelector('main');\nmain.classList.add('favorite_padding');\n\nconst favoritesContainer = document.querySelector('.favorite__list');\nfavoritesContainer.addEventListener('click', onRemoveFromFavClick);\n\nconst KEY_FAV_NEWS = 'favorite-news';\n\n// для read\nconst KEY_ALREADY_READ = 'read-news';\nconst checkMark = `<svg width=\"18\" height=\"18\">\n    <path\n        d=\"M16.189 3.594a.6.6 0 0 0-.413.182L6.6 12.952 2.824 9.176a.6.6 0 1 0-.848.848l4.2 4.2a.6.6 0 0 0 .848 0l9.6-9.6a.6.6 0 0 0-.435-1.03Z\"\n         />\n</svg>`;\nconst alreadyReadMarkup = `<div class='already-read'><div class='already-read__text'><span>Already read</span> ${checkMark}</div></div>`;\nconst checkReadStorage = url => {\n  let storageState = localStorage.getItem('read-news');\n  if (storageState) {\n    return JSON.parse(storageState).find(item => item.url === url);\n  }\n};\nconst saveRead = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const loadRead = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\n// для read\n\nconst loadFav = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\nconst saveRemoved = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\n// перевірка на пустий сторедж\nconst favorites = loadFav(KEY_FAV_NEWS);\nif (favorites == null || favorites.length === 0) {\n  pageNothingFound();\n  return;\n}\n\n// для кожного елемента стореджу створи розмітку\nfor (const favorite of favorites) {\n  const card = createFavNewsMarkUp(favorite);\n  favoritesContainer.insertAdjacentHTML('beforeend', card);\n}\n\n// створює розмітку\nfunction createFavNewsMarkUp({\n  id,\n  urlMedia,\n  section,\n  title,\n  abstract,\n  published_date,\n  url,\n}) {\n  return `\n    <li class=\"news-card__item card__favorite\" id=${id}>\n      <article class=\"news-card__article\">\n        <div class=\"news-card__img-wrapper\">\n          <img class=\"news-card__img\" src=${urlMedia} alt=\"news image\" />\n          <span class=\"news-card__category\">${section}</span>\n          <div class=\"news-card__btn-favorite remove-from-fav\">\n            <span>Remove from favorite</span>\n           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12\" viewBox=\"0 0 14 12\" fill=\"none\">\n<path d=\"M3.66536 0C1.8247 0 0.332031 1.47733 0.332031 3.3C0.332031 4.77133 0.915365 8.26333 6.65736 11.7933C6.76022 11.8559 6.8783 11.889 6.9987 11.889C7.1191 11.889 7.23718 11.8559 7.34003 11.7933C13.082 8.26333 13.6654 4.77133 13.6654 3.3C13.6654 1.47733 12.1727 0 10.332 0C8.49136 0 6.9987 2 6.9987 2C6.9987 2 5.50603 0 3.66536 0Z\" fill=\"#4B48DA\"/>\n</svg>\n            </div>\n        </div>\n        <div class=\"news-card__text\">\n          <h2 class=\"news-card__title\">${textHiding(title, 30)}</h2>\n          <p class=\"news-card__description\">${textHiding(abstract, 65)}</p>\n        </div>\n        <div class=\"news-card__info\">\n          <span class=\"news-card__date\">${published_date.replaceAll(\n            '-',\n            '/'\n          )}</span>\n          <a class=\"news-card__read-more\" href=${url} target='blank'>Read more</a>\n        </div>\n      </article>\n        ${checkReadStorage(url) ? alreadyReadMarkup : ''}\n    </li>\n    `;\n}\n\n// видаляє картку зі сторінки та стореджу по кліку на кнопку\nfunction onRemoveFromFavClick(e) {\n  const removeBtn = e.target.closest('.news-card__btn-favorite');\n  if (!removeBtn) return;\n  const card = removeBtn.closest('.news-card__item');\n\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n  for (let i = 0; i < favorites.length; i += 1) {\n    if (favorites[i].url === url) {\n      favorites.splice(i, 1);\n    }\n  }\n\n  saveRemoved(KEY_FAV_NEWS, favorites);\n  card.remove();\n\n  if (favorites == null || favorites.length === 0) {\n    pageNothingFound();\n  }\n}\n\n// додавання у read\nfavoritesContainer.addEventListener('click', onReadMoreClick);\nfunction onReadMoreClick(e) {\n  const readMoreBtn = e.target.closest('.news-card__read-more');\n  if (!readMoreBtn) return;\n\n  let currentStorageState = loadRead(KEY_ALREADY_READ) || [];\n  const card = readMoreBtn.closest('.news-card__item');\n\n  const urlMedia = card.querySelector('.news-card__img').getAttribute('src');\n  const section = card.querySelector('.news-card__category').textContent;\n  const title = card.querySelector('.news-card__title').textContent;\n  const abstract = card.querySelector('.news-card__description').textContent;\n  const published_date = card.querySelector('.news-card__date').textContent;\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n\n  let today = new Date();\n  let dd = String(today.getDate()).padStart(2, '0');\n  let mm = String(today.getMonth() + 1).padStart(2, '0');\n  let yyyy = today.getFullYear();\n\n  const dateOfRead = mm + '/' + dd + '/' + yyyy;\n\n  // об'єкт, що зберігається у сховищі\n  const readNews = {\n    urlMedia,\n    section,\n    title,\n    abstract,\n    published_date,\n    url,\n    dateOfRead,\n  };\n\n  const isAlreadyRead = currentStorageState.some(\n    news => readNews.url === news.url\n  );\n\n  // перевірка чи є у сховищі\n  if (!isAlreadyRead) {\n    currentStorageState.push(readNews);\n    saveRead(KEY_ALREADY_READ, currentStorageState);\n  }\n\n  card.insertAdjacentHTML('beforeend', alreadyReadMarkup);\n}\n"],"names":["parcelRequire","home","document","querySelector","favourite","read","window","location","pathname","indexOf","classList","remove","add","checkbox","mobileCheckbox","darkMode","this","checked","body","localStorage","setItem","addEventListener","favoritesContainer","e","removeBtn","target","closest","card","url","getAttribute","i","favorites","length","splice","key","value","serializedState","JSON","stringify","error","console","message","saveRemoved","KEY_FAV_NEWS","$3huUq","pageNothingFound","KEY_ALREADY_READ","alreadyReadMarkup","getItem","undefined","parse","loadFav","favorite","createFavNewsMarkUp","insertAdjacentHTML","readMoreBtn","currentStorageState","loadRead","urlMedia","section","textContent","title","abstract","published_date","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","readNews","dateOfRead","some","news","push","saveRead","id","$mPsIJ","textHiding","replaceAll","storageState","find","item","checkReadStorage"],"version":3,"file":"favourite.aa341d0b.js.map"}