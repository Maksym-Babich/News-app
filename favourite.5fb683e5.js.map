{"mappings":"khBAEAA,EAAA,S,WACA,IAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAYF,SAASC,cAAc,cACnCE,EAAOH,SAASC,cAAc,SACwB,IAAxDG,OAAOC,SAASC,SAASC,QAAQ,oBACjCR,EAAKS,UAAUC,OAAO,WACtBN,EAAKK,UAAUC,OAAO,WACtBP,EAAUM,UAAUE,IAAI,YACkC,IAAnDN,OAAOC,SAASC,SAASC,QAAQ,eACxCR,EAAKS,UAAUC,OAAO,WACtBP,EAAUM,UAAUC,OAAO,WAC3BN,EAAKK,UAAUE,IAAI,aAEnBR,EAAUM,UAAUC,OAAO,WAC3BN,EAAKK,UAAUC,OAAO,WACtBV,EAAKS,UAAUE,IAAI,YAGvB,IAAMC,EAAWX,SAASC,cAAc,aAClCW,EAAiBZ,SAASC,cAAc,oBAG9C,SAASY,IACHC,KAAKC,SACLC,KAAKR,UAAUE,IAAI,QACnBO,aAAaC,QAAQ,aAAc,UAEnCF,KAAKR,UAAUC,OAAO,QACtBQ,aAAaC,QAAQ,aAAc,S,CARzCP,EAASQ,iBAAiB,SAAUN,GACpCD,EAAeO,iBAAiB,SAAUN,GAY1C,IAAMO,EAAe,gBAEJpB,SAASC,cAAc,oBAC/BkB,iBAAiB,SAsBgB,SAAdE,GAC1B,IAAMC,EAASD,EAAEE,OAAOC,QAAQ,4BAChC,IAAKF,EAAQ,OAIU,IAAnBG,EAhBO,SAAAC,GACX,IACE,IAAMC,EAAkBV,aAAaW,QAAQF,GAC7C,OAA2B,OAApBC,OAA2BE,EAAYC,KAAKC,MAAMJ,E,CACzD,MAAOK,GACPC,QAAQD,MAAMA,EAAME,Q,EAWIC,CAAKf,IAAiB,GAC1CgB,EAAOd,EAAOE,QAAQ,oBAEtBa,EAAKD,EAAKE,aAAa,MACvBC,EAAWH,EAAKnC,cAAc,mBAAmBqC,aAAa,OAC9DE,EAAUJ,EAAKnC,cAAc,wBAAwBwC,YACrDC,EAAQN,EAAKnC,cAAc,qBAAqBwC,YAChDE,EAAWP,EAAKnC,cAAc,2BAA2BwC,YACzDG,EAAiBR,EAAKnC,cAAc,oBAAoBwC,YACxDI,EAAMT,EAAKnC,cAAc,yBAAyBqC,aAAa,QAG/DQ,EAAe,CACnBT,KACAE,WACAC,UACAE,QACAC,WACAC,iBACAC,OAGyBpB,EAAoBsB,MAC7C,SAAAC,G,OAAQF,EAAaT,KAAOW,EAAKX,E,MAKjCZ,EAAoBwB,KAAKH,GACzBI,EAAK9B,EAAcK,IAIL,GAAZH,EAAOd,UAAU2C,SAAS,mBAAoB,CAChD7B,EAAOmB,YAAc,kBACrB,IAAMW,EAAsB3B,EAAoB4B,QAC9C,SAAAC,G,OAAQR,EAAaT,KAAOiB,EAAKjB,E,IAEnCa,EAAK9B,EAAcgC,E,CAIhB9B,EAAOd,UAAU2C,SAAS,qBAC7B7B,EAAOmB,YAAc,wBAGvBnB,EAAOd,UAAU+C,OAAO,kB,IAvET,IAAXL,EAAO,SAACxB,EAAK8B,GACjB,IACE,IAAM7B,EAAkBG,KAAK2B,UAAUD,GACvCvC,aAAaC,QAAQQ,EAAKC,E,CAC1B,MAAOK,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q","sources":["src/js/favourite.js"],"sourcesContent":["\n// -- underline current menu item in header -- //\nimport './header';\nconst home = document.querySelector('#home');\nconst favourite = document.querySelector('#favourite');\nconst read = document.querySelector('#read');\nif (window.location.pathname.indexOf('/favourite.html') === 0) {\n    home.classList.remove('current');\n    read.classList.remove('current');\n    favourite.classList.add('current');\n} else if (window.location.pathname.indexOf('/read.html') === 0) {\n    home.classList.remove('current');\n    favourite.classList.remove('current');\n    read.classList.add('current');\n} else {\n    favourite.classList.remove('current');\n    read.classList.remove('current');\n    home.classList.add('current');\n};\n\nconst checkbox = document.querySelector('.checkbox');\nconst mobileCheckbox = document.querySelector('.mobile-checkbox');\ncheckbox.addEventListener('change', darkMode);\nmobileCheckbox.addEventListener('change', darkMode);\nfunction darkMode() {\n  if (this.checked) {\n      body.classList.add('dark');\n      localStorage.setItem('dark-theme', 'dark');\n  } else {\n      body.classList.remove('dark');\n      localStorage.setItem('dark-theme', 'light');\n  }\n};\n\nimport './header';\nconst KEY_FAV_NEWS = 'favorite-news';\n\nconst newsList = document.querySelector('.news-card__list');\nnewsList.addEventListener('click', onFavoriteBtnClick);\n\n// функції для роботи з local storage\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\n// додавання та видалення новин до storage по кліку на кнопку\nfunction onFavoriteBtnClick(e) {\n  const favBtn = e.target.closest('.news-card__btn-favorite');\n  if (!favBtn) return;\n\n  // перемикає додатковий клас\n\n  let currentStorageState = load(KEY_FAV_NEWS) || [];\n  const card = favBtn.closest('.news-card__item');\n\n  const id = card.getAttribute('id');\n  const urlMedia = card.querySelector('.news-card__img').getAttribute('src');\n  const section = card.querySelector('.news-card__category').textContent;\n  const title = card.querySelector('.news-card__title').textContent;\n  const abstract = card.querySelector('.news-card__description').textContent;\n  const published_date = card.querySelector('.news-card__date').textContent;\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n\n  // об'єкт, що зберігається у сховищі\n  const selectedNews = {\n    id,\n    urlMedia,\n    section,\n    title,\n    abstract,\n    published_date,\n    url,\n  };\n\n  const isAlreadyInStorage = currentStorageState.some(\n    news => selectedNews.id === news.id\n  );\n\n  // перевірка чи є у сховищі\n  if (!isAlreadyInStorage) {\n    currentStorageState.push(selectedNews);\n    save(KEY_FAV_NEWS, currentStorageState);\n  }\n\n  // видаляє зі сховища\n  if (favBtn.classList.contains('remove-from-fav')) {\n    favBtn.textContent = 'Add to favorite';\n    const updatedStorageState = currentStorageState.filter(\n      item => selectedNews.id !== item.id\n    );\n    save(KEY_FAV_NEWS, updatedStorageState);\n  }\n\n  // додає до сховища\n  if (!favBtn.classList.contains('remove-from-fav')) {\n    favBtn.textContent = 'Remove from favorite';\n  }\n\n  favBtn.classList.toggle('remove-from-fav');\n}\n\n"],"names":["parcelRequire","$47799112dc97d416$var$home","document","querySelector","$47799112dc97d416$var$favourite","$47799112dc97d416$var$read","window","location","pathname","indexOf","classList","remove","add","$47799112dc97d416$var$checkbox","$47799112dc97d416$var$mobileCheckbox","$47799112dc97d416$var$darkMode","this","checked","body","localStorage","setItem","addEventListener","$47799112dc97d416$var$KEY_FAV_NEWS","e","favBtn","target","closest","currentStorageState","key","serializedState","getItem","undefined","JSON","parse","error","console","message","$47799112dc97d416$var$load","card","id","getAttribute","urlMedia","section","textContent","title","abstract","published_date","url","selectedNews","some","news","push","$47799112dc97d416$var$save","contains","updatedStorageState","filter","item","toggle","value","stringify"],"version":3,"file":"favourite.5fb683e5.js.map"}