{"mappings":"sgBACAA,EAAA,S,iBAGA,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAYF,SAASC,cAAc,cACnCE,EAAOH,SAASC,cAAc,SACwB,IAAxDG,OAAOC,SAASC,SAASC,QAAQ,oBACnCR,EAAKS,UAAUC,OAAO,WACtBN,EAAKK,UAAUC,OAAO,WACtBP,EAAUM,UAAUE,IAAI,YACoC,IAAnDN,OAAOC,SAASC,SAASC,QAAQ,eAC1CR,EAAKS,UAAUC,OAAO,WACtBP,EAAUM,UAAUC,OAAO,WAC3BN,EAAKK,UAAUE,IAAI,aAEnBR,EAAUM,UAAUC,OAAO,WAC3BN,EAAKK,UAAUC,OAAO,WACtBV,EAAKS,UAAUE,IAAI,YAGrB,MAAMC,EAAWX,SAASC,cAAc,aAClCW,EAAiBZ,SAASC,cAAc,oBAG9C,SAASY,IACHC,KAAKC,SACPC,KAAKR,UAAUE,IAAI,QACnBO,aAAaC,QAAQ,aAAc,UAEnCF,KAAKR,UAAUC,OAAO,QACtBQ,aAAaC,QAAQ,aAAc,S,CARvCP,EAASQ,iBAAiB,SAAUN,GACpCD,EAAeO,iBAAiB,SAAUN,GAW1C,MAAMO,EAAqBpB,SAASC,cAAc,mBAClDmB,EAAmBD,iBAAiB,SA0EpC,SAA8BE,GAC5B,MAAMC,EAAYD,EAAEE,OAAOC,QAAQ,4BACnC,IAAKF,EAAW,OAChB,MAAMG,EAAOH,EAAUE,QAAQ,oBAEzBE,EAAKD,EAAKE,aAAa,MAC7B,IAAK,IAAIC,EAAI,EAAGA,EAAIC,EAAUC,OAAQF,GAAK,EACrCC,EAAUD,GAAGF,KAAOA,GAAyB,MAAnBG,EAAUD,GAAGF,IACzCG,EAAUE,OAAOH,EAAG,GAtEN,EAACI,EAAKC,KACxB,IACE,MAAMC,EAAkBC,KAAKC,UAAUH,GACvChB,aAAaC,QAAQc,EAAKE,E,CAC1B,MAAOG,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAqE3CC,CAAYC,EAAcZ,GAC1BJ,EAAKhB,Q,IArFP,MAAMgC,EAAe,gBAoBfZ,EAlBU,CAAAG,IACd,IACE,MAAME,EAAkBjB,aAAayB,QAAQV,GAC7C,OAA2B,OAApBE,OAA2BS,EAAYR,KAAKS,MAAMV,E,CACzD,MAAOG,GACPC,QAAQD,MAAMA,EAAME,Q,GAaNM,CAAQJ,GAC1B,GAAiB,MAAbZ,EAKoC,IAAnC,MAAMiB,KAAYjB,EAAW,CAChC,MAAMJ,EAAOsB,EAAoBD,GACjC1B,EAAmB4B,mBAAmB,YAAavB,E,CAItC,SAANsB,GAAoBrB,GAC3BA,EAAEuB,SACFA,EAAQC,QACRA,EAAOC,MACPA,EAAKC,SACLA,EAAQC,eACRA,EAAcC,IACdA,IAEA,MAAO,uDAC2C5B,2IAGRuB,sEACEC,0nBAUL,EAAAK,EAAAC,YAAWL,EAAO,0DACb,EAAAI,EAAAC,YAAWJ,EAAU,2GAGzBC,EAAeI,WAC7C,IACA,+DAEqCH,oE","sources":["src/js/favorite-page.js"],"sourcesContent":["// -- underline current menu item in header -- //\nimport './header';\nimport { textHiding } from './news-text-hiding';\n\nconst home = document.querySelector('#home');\nconst favourite = document.querySelector('#favourite');\nconst read = document.querySelector('#read');\nif (window.location.pathname.indexOf('/favourite.html') === 0) {\n  home.classList.remove('current');\n  read.classList.remove('current');\n  favourite.classList.add('current');\n} else if (window.location.pathname.indexOf('/read.html') === 0) {\n  home.classList.remove('current');\n  favourite.classList.remove('current');\n  read.classList.add('current');\n} else {\n  favourite.classList.remove('current');\n  read.classList.remove('current');\n  home.classList.add('current');\n}\n\nconst checkbox = document.querySelector('.checkbox');\nconst mobileCheckbox = document.querySelector('.mobile-checkbox');\ncheckbox.addEventListener('change', darkMode);\nmobileCheckbox.addEventListener('change', darkMode);\nfunction darkMode() {\n  if (this.checked) {\n    body.classList.add('dark');\n    localStorage.setItem('dark-theme', 'dark');\n  } else {\n    body.classList.remove('dark');\n    localStorage.setItem('dark-theme', 'light');\n  }\n}\n\nconst favoritesContainer = document.querySelector('.favorite__list');\nfavoritesContainer.addEventListener('click', onRemoveFromFavClick);\n\nconst KEY_FAV_NEWS = 'favorite-news';\n\nconst loadFav = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\nconst saveRemoved = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\n// перевірка на пустий сторедж\nconst favorites = loadFav(KEY_FAV_NEWS);\nif (favorites == null) {\n  return;\n}\n\n// для кожного елемента стореджу створи розмітку\nfor (const favorite of favorites) {\n  const card = createFavNewsMarkUp(favorite);\n  favoritesContainer.insertAdjacentHTML('beforeend', card);\n}\n\n// створює розмітку\nfunction createFavNewsMarkUp({\n  id,\n  urlMedia,\n  section,\n  title,\n  abstract,\n  published_date,\n  url,\n}) {\n  return `\n    <li class=\"news-card__item card__favorite\" id=${id}>\n      <article class=\"news-card__article\">\n        <div class=\"news-card__img-wrapper\">\n          <img class=\"news-card__img\" src=${urlMedia} alt=\"news image\" />\n          <span class=\"news-card__category\">${section}</span>\n          <div class=\"news-card__btn-favorite remove-from-fav\">\n            <span>Remove from favorite</span>\n           <svg class=favorite__svg id=\"liked\" viewBox=\"0 0 32 32\" width=16 height=16>\n            <path fill=\"#4b48da\" style=\"fill:var(--color6, #4b48da)\"\n                d=\"M9.333 4c-3.681 0-6.667 2.955-6.667 6.6 0 2.943 1.167 9.927 12.651 16.987a1.316 1.316 0 0 0 1.366 0c11.484-7.06 12.651-14.044 12.651-16.987 0-3.645-2.985-6.6-6.667-6.6S16 8 16 8s-2.985-4-6.667-4z\" />\n        </svg>\n            </div>\n        </div>\n        <div class=\"news-card__text\">\n          <h2 class=\"news-card__title\">${textHiding(title, 30)}</h2>\n          <p class=\"news-card__description\">${textHiding(abstract, 65)}</p>\n        </div>\n        <div class=\"news-card__info\">\n          <span class=\"news-card__date\">${published_date.replaceAll(\n            '-',\n            '/'\n          )}</span>\n          <a class=\"news-card__read-more\" href=${url}>Read more</a>\n        </div>\n      </article>\n    </li>\n    `;\n}\n\n// видаляє картку зі сторінки та стореджу по кліку на кнопку\nfunction onRemoveFromFavClick(e) {\n  const removeBtn = e.target.closest('.news-card__btn-favorite');\n  if (!removeBtn) return;\n  const card = removeBtn.closest('.news-card__item');\n\n  const id = card.getAttribute('id');\n  for (let i = 0; i < favorites.length; i += 1) {\n    if (favorites[i].id === id || favorites[i].id == null) {\n      favorites.splice(i, 1);\n    }\n  }\n\n  saveRemoved(KEY_FAV_NEWS, favorites);\n  card.remove();\n}\n"],"names":["parcelRequire","home","document","querySelector","favourite","read","window","location","pathname","indexOf","classList","remove","add","checkbox","mobileCheckbox","darkMode","this","checked","body","localStorage","setItem","addEventListener","favoritesContainer","e","removeBtn","target","closest","card","id","getAttribute","i","favorites","length","splice","key","value","serializedState","JSON","stringify","error","console","message","saveRemoved","KEY_FAV_NEWS","getItem","undefined","parse","loadFav","favorite","createFavNewsMarkUp","insertAdjacentHTML","urlMedia","section","title","abstract","published_date","url","$mPsIJ","textHiding","replaceAll"],"version":3,"file":"favourite.8d8e60fa.js.map"}