{"mappings":"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","sources":["src/js/add-to-read.js","src/js/read.js"],"sourcesContent":["const KEY_ALREADY_READ = 'read-news';\nconst newsLists = document.querySelectorAll('.news-card__list');\n\nconst checkMark = `<svg width=\"18\" height=\"18\">\n    <path\n        d=\"M16.189 3.594a.6.6 0 0 0-.413.182L6.6 12.952 2.824 9.176a.6.6 0 1 0-.848.848l4.2 4.2a.6.6 0 0 0 .848 0l9.6-9.6a.6.6 0 0 0-.435-1.03Z\"\n         />\n</svg>`;\n\nconst alreadyReadMarkup = `<div class='already-read'><div class='already-read__text'><span>Already read</span> ${checkMark}</div></div>`;\n\nconst saveRead = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const loadRead = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nnewsLists.forEach(list => {\n  list.addEventListener('click', onReadMoreClick);\n});\n\nfunction onReadMoreClick(e) {\n  const readMoreBtn = e.target.closest('.news-card__read-more');\n  if (!readMoreBtn) return;\n\n  let currentStorageState = loadRead(KEY_ALREADY_READ) || [];\n  const card = readMoreBtn.closest('.news-card__item');\n\n  const urlMedia = card.querySelector('.news-card__img').getAttribute('src');\n  const section = card.querySelector('.news-card__category').textContent;\n  const title = card.querySelector('.news-card__title').textContent;\n  const abstract = card.querySelector('.news-card__description').textContent;\n  const published_date = card.querySelector('.news-card__date').textContent;\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n\n  let today = new Date();\n  let dd = String(today.getDate()).padStart(2, '0');\n  let mm = String(today.getMonth() + 1).padStart(2, '0');\n  let yyyy = today.getFullYear();\n\n  const dateOfRead = mm + '/' + dd + '/' + yyyy;\n\n  // об'єкт, що зберігається у сховищі\n  const readNews = {\n    urlMedia,\n    section,\n    title,\n    abstract,\n    published_date,\n    url,\n    dateOfRead,\n  };\n\n  const isAlreadyRead = currentStorageState.some(\n    news => readNews.url === news.url\n  );\n\n  // перевірка чи є у сховищі\n  if (!isAlreadyRead) {\n    currentStorageState.push(readNews);\n    saveRead(KEY_ALREADY_READ, currentStorageState);\n  }\n\n  card.insertAdjacentHTML('beforeend', alreadyReadMarkup);\n}\n\n// рендер карток\n// function renderFavorites() {\n//   const favoritesContainer = document.querySelector('.favorites-list');\n\n//   favoritesContainer.innerHTML = '';\n\n//   const favorites = loadRead(KEY_ALREADY_READ);\n\n//   for (const favorite of favorites) {\n//     const card = createNewsCard(favorite);\n//     favoritesContainer.appendChild(card);\n//   }\n// }\n\n// написати функцію createNewsCard\n","// -- underline current menu item in header -- //\nimport { loadRead } from './add-to-read';\nimport './header';\nimport { heartSvg, activeHeartSvg, checkFavoriteStorage } from './markup';\nimport { textHiding } from './news-text-hiding';\nimport { pageNothingFound } from './markup';\n\nconst KEY_ALREADY_READ = 'read-news';\nconst arrowUpSvg = `\n  <svg width=\"14\" height=\"9\" class=\"hide-button__icon\">\n    <g clip-path=\"url(#a)\">\n      <path d=\"M1.645 11 0 9.478 7 3l7 6.478L12.355 11 7 6.055 1.645 11Z\" />\n    </g>\n    <defs>\n      <clipPath id=\"a\">\n        <path fill=\"#fff\" d=\"M0 0h14v14H0z\" />\n      </clipPath>\n    </defs>\n  </svg>\n`;\nconst readContainer = document.querySelector('.read-by-date-list');\nconst home = document.querySelector('#home');\nconst favourite = document.querySelector('#favourite');\nconst read = document.querySelector('#read');\nif (window.location.pathname.indexOf('/favourite') >= 0) {\n  home.classList.remove('current');\n  read.classList.remove('current');\n  favourite.classList.add('current');\n} else if (window.location.pathname.indexOf('/read') >= 0) {\n  home.classList.remove('current');\n  favourite.classList.remove('current');\n  read.classList.add('current');\n} else {\n  favourite.classList.remove('current');\n  read.classList.remove('current');\n  home.classList.add('current');\n}\n\nconst checkbox = document.querySelector('.checkbox');\nconst mobileCheckbox = document.querySelector('.mobile-checkbox');\nconst body = document.querySelector('body');\ncheckbox.addEventListener('change', darkMode);\nmobileCheckbox.addEventListener('change', darkMode);\nfunction darkMode() {\n  if (this.checked) {\n    body.classList.add('dark');\n    localStorage.setItem('dark-theme', 'dark');\n  } else {\n    body.classList.remove('dark');\n    localStorage.setItem('dark-theme', 'light');\n  }\n}\n\nconst readByDateList = document.querySelector('.read-by-date-list');\n\nconst onHideButtonClick = function (event) {\n  const hideBtn = event.target.closest('.hide-button');\n  if (!hideBtn) {\n    return;\n  }\n  const readByDateContainer = hideBtn.closest('.read-by-date-container');\n  readByDateContainer.classList.toggle('list-hidden');\n};\n\nreadByDateList.addEventListener('click', onHideButtonClick);\n\n// перевірка на пустий сторедж\nconst readNews = loadRead(KEY_ALREADY_READ);\nif (readNews) {\n  const arrayOfDates = [];\n\n  for (let news of readNews) {\n    if (!arrayOfDates.includes(news.dateOfRead)) {\n      arrayOfDates.push(news.dateOfRead);\n    }\n  }\n  const dateLists = arrayOfDates.map(date => {\n    return `<li class=\"read-by-date-container\">\n      <div class=\"date-wrapper\">\n        <button class=\"hide-button\" type=\"button\">\n          <p class=\"date-of-read\">${date}</p>\n          ${arrowUpSvg}\n        </button>\n      </div>\n      <ul class=\"news-card__list\"></ul>\n    </li>`;\n  });\n  readContainer.innerHTML = dateLists.reverse().join('');\n  const cardLists = document.querySelectorAll('.news-card__list');\n  cardLists.forEach(list => {\n    for (let news of readNews) {\n      if (\n        news.dateOfRead ===\n        list.closest('.read-by-date-container').querySelector('.date-of-read')\n          .textContent\n      ) {\n        const cardMarkup = `\n    <li class=\"news-card__item\" >\n      <article class=\"news-card__article\">\n        <div class=\"news-card__img-wrapper\">\n          <img class=\"news-card__img\" src=${news.urlMedia} alt=\"news image\" />\n          <span class=\"news-card__category\">${news.section}</span>\n          <div class=\"news-card__btn-favorite ${\n            checkFavoriteStorage(news.url) ? 'remove-from-fav' : ''\n          }\">\n            <span>${\n              checkFavoriteStorage(news.url)\n                ? 'Remove from favorite'\n                : 'Add to favorite'\n            }</span>\n            ${checkFavoriteStorage(news.url) ? activeHeartSvg : heartSvg}\n            </div>\n        </div>\n        <div class=\"news-card__text\">\n          <h2 class=\"news-card__title\">${textHiding(news.title, 60)}</h2>\n          <p class=\"news-card__description\">${textHiding(\n            news.abstract,\n            150\n          )}</p>\n        </div>\n        <div class=\"news-card__info\">\n          <span class=\"news-card__date\">${news.published_date.replaceAll(\n            '-',\n            '/'\n          )}</span>\n          <a class=\"news-card__read-more\" href=${\n            news.url\n          } target='blank'>Read more</a>\n        </div>\n      </article>\n    </li>\n    `;\n        list.insertAdjacentHTML('beforeend', cardMarkup);\n      }\n    }\n  });\n} else {\n  pageNothingFound();\n}\n"],"names":["$b770d7ec3f5f609b$var$newsLists","document","querySelectorAll","$b770d7ec3f5f609b$export$aa7d8563c90c06aa","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$b770d7ec3f5f609b$var$onReadMoreClick","e","readMoreBtn","target","closest","currentStorageState","card","urlMedia","querySelector","getAttribute","section","textContent","title","abstract","published_date","url","today","Date","dd","String","getDate","padStart","readNews","getMonth","getFullYear","some","news","push","value","stringify","setItem","$b770d7ec3f5f609b$var$saveRead","insertAdjacentHTML","forEach","list","addEventListener","$103c6abfc3a0e310$var$readContainer","$103c6abfc3a0e310$var$home","$103c6abfc3a0e310$var$favourite","$103c6abfc3a0e310$var$read","window","location","pathname","indexOf","classList","remove","add","$103c6abfc3a0e310$var$checkbox","$103c6abfc3a0e310$var$mobileCheckbox","$103c6abfc3a0e310$var$body","$103c6abfc3a0e310$var$darkMode","this","checked","event","hideBtn","toggle","$103c6abfc3a0e310$var$readNews","arrayOfDates","news1","includes","dateOfRead","dateLists","map","date","innerHTML","reverse","join","news2","cardMarkup","$3huUq","checkFavoriteStorage","activeHeartSvg","heartSvg","$mPsIJ","textHiding","replaceAll","pageNothingFound"],"version":3,"file":"read.dd00b6a0.js.map"}