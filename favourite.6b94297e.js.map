{"mappings":"AAAO,SAASA,EAAWC,EAAMC,GAC/B,GAAID,EAAKE,OAASD,EAAY,CAC5B,IAAIE,EAAUH,EAAKI,OAAOC,UAAU,EAAGJ,GACnCK,EAAYH,EAAQI,YAAY,KACpC,OAAOJ,EAAQE,UAAU,EAAGC,GAAa,K,CAE3C,OAAON,C,CCJT,MAAMQ,EAAqBC,SAASC,cAAc,mBAIlDF,EAAmBG,UAAY,GAE/B,MAAMC,EAAOC,IACX,IACE,MAAMC,EAAkBC,aAAaC,QAAQH,GAC7C,OAA2B,OAApBC,OAA2BG,EAAYC,KAAKC,MAAML,E,CACzD,MAAOM,GACPC,QAAQD,MAAMA,EAAME,Q,GAalBC,EAAYX,EAtBG,iBAwBrB,IAAK,MAAMY,KAAYD,EAAW,CAChC,MAAME,EAAOC,EAAoBF,GACjChB,EAAmBmB,mBAAmB,YAAaF,E,CAGrD,SAASC,GAAoBE,GAC3BA,EAAEC,SACFA,EAAQC,QACRA,EAAOC,MACPA,EAAKC,SACLA,EAAQC,eACRA,EAAcC,IACdA,IAEA,MAAO,wCAC4BN,2IAGOC,sEACEC,iXASL/B,EAAWgC,EAAO,yDACbhC,EAAWiC,EAAU,2GAGzBC,EAAeE,WAC7C,IACA,+DAEqCD,oE,CAOjD1B,EAAmB4B,iBAAiB,SACpC,SAA4BC,GAC1B,MAAMC,EAASD,EAAEE,OAAOC,QAAQ,4BAChC,IAAKF,EAAQ,OACb,IAAIG,EAAsB7B,EAvEP,iBAwEnB,MAAMa,EAAOa,EAAOE,QAAQ,oBAEtBZ,EAAKH,EAAKiB,aAAa,MACvBb,EAAWJ,EAAKf,cAAc,mBAAmBgC,aAAa,OAC9DZ,EAAUL,EAAKf,cAAc,wBAAwBiC,YACrDZ,EAAQN,EAAKf,cAAc,qBAAqBiC,YAChDX,EAAWP,EAAKf,cAAc,2BAA2BiC,YACzDV,EAAiBR,EAAKf,cAAc,oBAAoBiC,YACxDT,EAAMT,EAAKf,cAAc,yBAAyBgC,aAAa,QAG/DE,EAAe,C,GACnBhB,E,SACAC,E,QACAC,E,MACAC,E,SACAC,E,eACAC,E,IACAC,GAQF,GAL2BO,EAAoBI,MAC7CC,GAAQF,EAAahB,KAAOkB,EAAKlB,KAIX,CArFb,EAACf,EAAKkC,KACjB,IACE,MAAMjC,EAAkBI,KAAK8B,UAAUD,GACvChC,aAAakC,QAAQpC,EAAKC,E,CAC1B,MAAOM,GACPC,QAAQD,MAAM,oBAAqBA,EAAME,Q,GAoFzC4B,CAtGiB,gBAmGWT,EAAoBU,QAC9CC,GAAQR,EAAahB,KAAOwB,EAAKxB,MAGnCpB,EAAmB6C,YAAY5B,E","sources":["src/js/news-text-hiding.js","src/js/favorite-page.js"],"sourcesContent":["export function textHiding(text, textLength) {\n  if (text.length > textLength) {\n    let newText = text.trim().substring(0, textLength);\n    let lastSpace = newText.lastIndexOf(' ');\n    return newText.substring(0, lastSpace) + '...';\n  }\n  return text;\n}\n","import { textHiding } from './news-text-hiding';\n\nconst favoritesContainer = document.querySelector('.favorite__list');\n\nconst KEY_FAV_NEWS = 'favorite-news';\n\nfavoritesContainer.innerHTML = '';\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst favorites = load(KEY_FAV_NEWS);\n\nfor (const favorite of favorites) {\n  const card = createFavNewsMarkUp(favorite);\n  favoritesContainer.insertAdjacentHTML('beforeend', card);\n}\n\nfunction createFavNewsMarkUp({\n  id,\n  urlMedia,\n  section,\n  title,\n  abstract,\n  published_date,\n  url,\n}) {\n  return `\n    <li class=\"news-card__item\" id=${id}>\n      <article class=\"news-card__article\">\n        <div class=\"news-card__img-wrapper\">\n          <img class=\"news-card__img\" src=${urlMedia} alt=\"news image\" />\n          <span class=\"news-card__category\">${section}</span>\n          <div class=\"news-card__btn-favorite remove-from-fav\">\n            <span>Remove from favorite</span>\n            <svg class=\"news-card__btn-icon\">\n                <use href=\"./images/sprite.svg#heart\"></use>\n             </svg>\n            </div>\n        </div>\n        <div class=\"news-card__text\">\n          <h2 class=\"news-card__title\">${textHiding(title, 30)}</h2>\n          <p class=\"news-card__description\">${textHiding(abstract, 65)}</p>\n        </div>\n        <div class=\"news-card__info\">\n          <span class=\"news-card__date\">${published_date.replaceAll(\n            '-',\n            '/'\n          )}</span>\n          <a class=\"news-card__read-more\" href=${url}>Read more</a>\n        </div>\n      </article>\n    </li>\n    `;\n}\n\nfavoritesContainer.addEventListener('click', onFavoriteBtnClick);\nfunction onFavoriteBtnClick(e) {\n  const favBtn = e.target.closest('.news-card__btn-favorite');\n  if (!favBtn) return;\n  let currentStorageState = load(KEY_FAV_NEWS);\n  const card = favBtn.closest('.news-card__item');\n\n  const id = card.getAttribute('id');\n  const urlMedia = card.querySelector('.news-card__img').getAttribute('src');\n  const section = card.querySelector('.news-card__category').textContent;\n  const title = card.querySelector('.news-card__title').textContent;\n  const abstract = card.querySelector('.news-card__description').textContent;\n  const published_date = card.querySelector('.news-card__date').textContent;\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n\n  // об'єкт, що зберігається у сховищі\n  const selectedNews = {\n    id,\n    urlMedia,\n    section,\n    title,\n    abstract,\n    published_date,\n    url,\n  };\n\n  const isAlreadyInStorage = currentStorageState.some(\n    news => selectedNews.id === news.id\n  );\n\n  // перевірка чи є у сховищі\n  if (isAlreadyInStorage) {\n    const updatedStorageState = currentStorageState.filter(\n      item => selectedNews.id === item.id\n    );\n    save(KEY_FAV_NEWS, updatedStorageState);\n    favoritesContainer.removeChild(card);\n  }\n}\n"],"names":["$0449f9841904dbc9$export$e402fc1a5abd74d4","text","textLength","length","newText","trim","substring","lastSpace","lastIndexOf","$1c0bffe6411de2f6$var$favoritesContainer","document","querySelector","innerHTML","$1c0bffe6411de2f6$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","$1c0bffe6411de2f6$var$favorites","favorite","card","$1c0bffe6411de2f6$var$createFavNewsMarkUp","insertAdjacentHTML","id","urlMedia","section","title","abstract","published_date","url","replaceAll","addEventListener","e","favBtn","target","closest","currentStorageState","getAttribute","textContent","selectedNews","some","news","value","stringify","setItem","$1c0bffe6411de2f6$var$save","filter","item","removeChild"],"version":3,"file":"favourite.6b94297e.js.map"}