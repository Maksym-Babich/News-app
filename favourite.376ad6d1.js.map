{"mappings":"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","sources":["src/js/favorite-page.js"],"sourcesContent":["// -- underline current menu item in header -- //\nimport './header';\nimport { textHiding } from './news-text-hiding';\nimport { pageNothingFound } from './markup';\n\nconst home = document.querySelector('#home');\nconst favourite = document.querySelector('#favourite');\nconst read = document.querySelector('#read');\nif (window.location.pathname.indexOf('/favourite.html') >= 0) {\n  home.classList.remove('current');\n  read.classList.remove('current');\n  favourite.classList.add('current');\n} else if (window.location.pathname.indexOf('/read.html') >= 0) {\n  home.classList.remove('current');\n  favourite.classList.remove('current');\n  read.classList.add('current');\n} else {\n  favourite.classList.remove('current');\n  read.classList.remove('current');\n  home.classList.add('current');\n}\n\nconst checkbox = document.querySelector('.checkbox');\nconst mobileCheckbox = document.querySelector('.mobile-checkbox');\ncheckbox.addEventListener('change', darkMode);\nmobileCheckbox.addEventListener('change', darkMode);\nfunction darkMode() {\n  if (this.checked) {\n    body.classList.add('dark');\n    localStorage.setItem('dark-theme', 'dark');\n  } else {\n    body.classList.remove('dark');\n    localStorage.setItem('dark-theme', 'light');\n  }\n}\n\n// падінг для main\nconst main = document.querySelector('main');\nmain.classList.add('favorite_padding');\n\nconst favoritesContainer = document.querySelector('.favorite__list');\nfavoritesContainer.addEventListener('click', onRemoveFromFavClick);\n\nconst KEY_FAV_NEWS = 'favorite-news';\n\nconst loadFav = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(error.message);\n  }\n};\nconst saveRemoved = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\n// перевірка на пустий сторедж\nconst favorites = loadFav(KEY_FAV_NEWS);\nif (favorites == null || favorites.length === 0) {\n  pageNothingFound();\n}\n\n// для кожного елемента стореджу створи розмітку\nfor (const favorite of favorites) {\n  const card = createFavNewsMarkUp(favorite);\n  favoritesContainer.insertAdjacentHTML('beforeend', card);\n}\n\n// створює розмітку\nfunction createFavNewsMarkUp({\n  id,\n  urlMedia,\n  section,\n  title,\n  abstract,\n  published_date,\n  url,\n}) {\n  return `\n    <li class=\"news-card__item card__favorite\" id=${id}>\n      <article class=\"news-card__article\">\n        <div class=\"news-card__img-wrapper\">\n          <img class=\"news-card__img\" src=${urlMedia} alt=\"news image\" />\n          <span class=\"news-card__category\">${section}</span>\n          <div class=\"news-card__btn-favorite remove-from-fav\">\n            <span>Remove from favorite</span>\n           <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"12\" viewBox=\"0 0 14 12\" fill=\"none\">\n<path d=\"M3.66536 0C1.8247 0 0.332031 1.47733 0.332031 3.3C0.332031 4.77133 0.915365 8.26333 6.65736 11.7933C6.76022 11.8559 6.8783 11.889 6.9987 11.889C7.1191 11.889 7.23718 11.8559 7.34003 11.7933C13.082 8.26333 13.6654 4.77133 13.6654 3.3C13.6654 1.47733 12.1727 0 10.332 0C8.49136 0 6.9987 2 6.9987 2C6.9987 2 5.50603 0 3.66536 0Z\" fill=\"#4B48DA\"/>\n</svg>\n            </div>\n        </div>\n        <div class=\"news-card__text\">\n          <h2 class=\"news-card__title\">${textHiding(title, 30)}</h2>\n          <p class=\"news-card__description\">${textHiding(abstract, 65)}</p>\n        </div>\n        <div class=\"news-card__info\">\n          <span class=\"news-card__date\">${published_date.replaceAll(\n            '-',\n            '/'\n          )}</span>\n          <a class=\"news-card__read-more\" href=${url}>Read more</a>\n        </div>\n      </article>\n    </li>\n    `;\n}\n\n// видаляє картку зі сторінки та стореджу по кліку на кнопку\nfunction onRemoveFromFavClick(e) {\n  const removeBtn = e.target.closest('.news-card__btn-favorite');\n  if (!removeBtn) return;\n  const card = removeBtn.closest('.news-card__item');\n\n  const url = card.querySelector('.news-card__read-more').getAttribute('href');\n  for (let i = 0; i < favorites.length; i += 1) {\n    if (favorites[i].url === url) {\n      favorites.splice(i, 1);\n    }\n  }\n\n  saveRemoved(KEY_FAV_NEWS, favorites);\n  card.remove();\n\n  if (favorites == null || favorites.length === 0) {\n    pageNothingFound();\n  }\n}\n"],"names":["parcelRequire","$732ea10bcbd98d8a$var$home","document","querySelector","$732ea10bcbd98d8a$var$favourite","$732ea10bcbd98d8a$var$read","window","location","pathname","indexOf","classList","remove","add","$732ea10bcbd98d8a$var$checkbox","$732ea10bcbd98d8a$var$mobileCheckbox","$732ea10bcbd98d8a$var$darkMode","this","checked","body","localStorage","setItem","addEventListener","$732ea10bcbd98d8a$var$favoritesContainer","e","removeBtn","target","closest","card","url","getAttribute","i","$732ea10bcbd98d8a$var$favorites","length","splice","key","value","serializedState","JSON","stringify","error","console","message","$732ea10bcbd98d8a$var$saveRemoved","$732ea10bcbd98d8a$var$KEY_FAV_NEWS","$1KhuP","pageNothingFound","getItem","undefined","parse","$732ea10bcbd98d8a$var$loadFav","param","id","urlMedia","section","title","abstract","published_date","$732ea10bcbd98d8a$var$_iteratorNormalCompletion","$732ea10bcbd98d8a$var$_didIteratorError","$732ea10bcbd98d8a$var$_iteratorError","$732ea10bcbd98d8a$var$_step","$732ea10bcbd98d8a$var$_iterator","Symbol","iterator","next","done","$732ea10bcbd98d8a$var$favorite","$732ea10bcbd98d8a$var$card","concat","$7XbyU","textHiding","replaceAll","insertAdjacentHTML","err","return"],"version":3,"file":"favourite.376ad6d1.js.map"}